<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Messages Navigation Bar</title>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <!-- React, ReactDOM, Babel -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: #ffffff;
      min-height: 200vh;
    }

    .header-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background-color: #ffffff;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    .top-navbar {
      background-color: #ffffff;
      padding: 16px 20px 19px 20px;
      text-align: center;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: all 0.3s ease;
      overflow: visible;
    }

    .messages-icon {
      position: absolute;
      left: 20px;
      width: 24px;
      height: 24px;
      top: 50%;
      transform: translateY(-45%);
      z-index: 10;
    }

    .add-button {
      position: absolute;
      right: 20px;
      cursor: pointer;
      z-index: 10;
    }

    .add-button:hover {
      opacity: 0.7;
    }

    .add-button i {
      color: #666;
      font-size: 20px;
    }

    .top-navbar h1 {
      font-size: 18px;
      font-weight: 500;
      color: #333;
      margin: 0;
      opacity: 0;
      transition: opacity 0.3s ease;
      position: absolute;
    }

    .top-navbar h1.visible {
      opacity: 1;
    }

    .stories-collapsed {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      position: absolute;
      transform: translateY(6px) scale(1);
      opacity: 1;
      pointer-events: auto;
      z-index: 5;
      gap: 0px;
      cursor: pointer;
    }

    .stories-collapsed.moved {
      transform: translateY(6px) scale(1);
      opacity: 0;
      pointer-events: none;
    }

    .story-item-collapsed {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      min-width: 40px;
      margin: 0 -4px;
      position: relative;
    }

    .story-item-collapsed:first-child {
      margin-left: 0;
    }

    .story-item-collapsed:last-child {
      margin-right: 0;
    }

    .story-ring-collapsed {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      padding: 1.5px;
      background: linear-gradient(45deg, rgb(240, 148, 51) 0%, rgb(230, 104, 60) 25%, rgb(220, 39, 67) 50%, rgb(204, 35, 102) 75%, rgb(188, 24, 136) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .story-ring-collapsed::after {
      content: '';
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 3px;
      height: 30px;
      background: #ffffff;
      z-index: 1;
      border-radius: 50%;
      display: none;
    }

    .story-item-collapsed:not(:last-child) .story-ring-collapsed::after {
      display: block;
      right: -1.5px;
      transform: translate(-50%, -50%);
    }

    .story-ring-inner-collapsed {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: #ffffff;
      padding: 1.5px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      z-index: 2;
    }

    .story-avatar-collapsed {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
    }

    .story-avatar-text-collapsed {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background-color: #ff8c42;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      font-weight: 600;
      color: #ffffff;
    }

    .stories-expanded {
      background-color: #ffffff;
      padding: 16px 0;
      overflow-x: auto;
      white-space: nowrap;
      max-height: 0;
      opacity: 0;
      transform: scale(0.95);
      transition: all 0.2s ease;
    }

    .stories-expanded.visible {
      max-height: 150px;
      opacity: 1;
      padding: 16px 0;
      transform: scale(1);
    }

    .stories-wrapper {
      display: flex;
      gap: 16px;
      padding: 0 16px;
    }

    .story-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
      min-width: 64px;
    }

    .story-ring {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      padding: 1.5px;
      background: linear-gradient(45deg, rgb(240, 148, 51) 0%, rgb(230, 104, 60) 25%, rgb(220, 39, 67) 50%, rgb(204, 35, 102) 75%, rgb(188, 24, 136) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .story-ring.multi-story {
      background: conic-gradient(
        from 0deg,
        rgb(240, 148, 51) 0deg,
        rgb(230, 104, 60) 45deg,
        rgb(220, 39, 67) 90deg,
        rgb(204, 35, 102) 135deg,
        rgb(188, 24, 136) 175deg,
        #dbdbdb 177deg,
        #dbdbdb 183deg,
        rgb(240, 148, 51) 185deg,
        rgb(230, 104, 60) 230deg,
        rgb(220, 39, 67) 270deg,
        rgb(204, 35, 102) 315deg,
        rgb(188, 24, 136) 355deg,
        #dbdbdb 357deg,
        #dbdbdb 360deg
      );
    }

    .story-ring-inner {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: #ffffff;
      padding: 1.5px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .story-avatar {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
    }

    .story-avatar-text {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background-color: #ff8c42;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: 600;
      color: #ffffff;
    }

    .story-label {
      margin-top: 8px;
      font-size: 12px;
      color: #262626;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 64px;
    }

    .nav-container {
      background-color: #ffffff;
    }

    .nav-bar {
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 10px 0;
      max-width: 400px;
      margin: 0 auto;
      position: relative;
    }

    .nav-item {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      padding: 8px;
      position: relative;
      transition: all 0.3s ease;
    }

    .nav-item i {
      font-size: 20px;
      color: #666;
      transition: color 0.3s ease;
    }

    .nav-item:hover i {
      color: #333;
    }

    .nav-item.active i {
      color: #749cbf;
    }

    .bottom-border {
      height: 3px;
      background-color: #e0e0e0;
      position: relative;
    }

    .active-indicator {
      position: absolute;
      height: 100%;
      width: 33.333%;
      background-color: #749cbf;
      transition: left 0.3s ease;
      left: 0;
    }

    .content-spacer {
      transition: height 0.2s ease;
    }

    .content-spacer.collapsed {
      height: 80px;
    }

    .content-spacer.expanded {
      height: 180px;
    }

    .message-item {
      display: flex;
      align-items: center;
      padding: 10px 16px;
      background: #ffffff;
      border-bottom: 1px solid #f0f0f0;
      cursor: pointer;
      position: relative;
    }

    .message-item:hover {
      background: #f8f8f8;
    }

    .message-avatar {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background-color: #ff9d5c;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: 600;
      color: #ffffff;
      margin-right: 12px;
      flex-shrink: 0;
    }

    .message-content {
      flex: 1;
      min-width: 0;
    }

    .message-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2px;
    }

    .message-name {
      font-size: 17px;
      font-weight: 500;
      color: #262626;
    }

    .message-date {
      font-size: 14px;
      color: #8e8e8e;
    }

    .message-preview {
      font-size: 16px;
      color: #8e8e8e;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .story-viewer-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #000000;
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 0.3s ease;
      overflow: hidden;
    }

    .story-viewer-content {
      width: 100%;
      height: 100%;
      position: relative;
    }

    .story-viewer-background {
      width: 100%;
      height: 100%;
      background: #000000;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 15px;
      overflow: hidden;
    }

    .story-viewer-header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 16px;
      background: linear-gradient(180deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0) 100%);
      z-index: 10;
    }

    .story-progress-container {
      display: flex;
      gap: 4px;
      margin-bottom: 12px;
    }

    .story-progress-bar {
      flex: 1;
      height: 2px;
      background-color: rgba(255, 255, 255, 0.3);
      border-radius: 2px;
      overflow: hidden;
    }

    .story-progress-fill {
      height: 100%;
      background-color: #ffffff;
      width: 100%;
    }

    .story-user-info {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .story-user-left {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .story-user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 2px solid #ffffff;
      background-color: #ff8c42;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: 600;
      color: #ffffff;
    }

    .story-user-details {
      display: flex;
      flex-direction: column;
    }

    .story-username {
      font-size: 14px;
      font-weight: 600;
      color: #ffffff;
    }

    .story-time {
      font-size: 12px;
      color: rgba(255, 255, 255, 0.7);
    }

    .story-actions {
      display: flex;
      gap: 16px;
    }

    .story-action-btn {
      background: none;
      border: none;
      color: #ffffff;
      cursor: pointer;
      font-size: 20px;
      padding: 4px;
    }

    .story-action-btn:hover {
      opacity: 0.7;
    }

    .story-viewer-footer {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 32px 20px;
      background: linear-gradient(0deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0) 100%);
      z-index: 10;
    }

    .story-caption {
      font-size: 18px;
      font-weight: 500;
      color: #ffffff;
      text-align: left;
      line-height: 1.4;
    }

    .story-reply-container {
      position: absolute;
      bottom: 20px;
      left: 20px;
      right: 20px;
      z-index: 11;
      display: flex;
      justify-content: center;
    }

    .story-reply-box {
      width: 100%;
      max-width: 500px;
      padding: 12px 20px;
      background-color: rgba(60, 60, 60, 0.95);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 50px;
      color: rgba(255, 255, 255, 0.5);
      font-size: 15px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      pointer-events: none;
    }
  </style>
</head>
<body>

  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function NavigationBar() {
      const [activeIndex, setActiveIndex] = useState(0);
      const [isScrolled, setIsScrolled] = useState(false);
      const [lastScrollY, setLastScrollY] = useState(0);
      const [showStoryViewer, setShowStoryViewer] = useState(false);
      const [storyDragY, setStoryDragY] = useState(0);
      const [isDragging, setIsDragging] = useState(false);
      const [currentStory, setCurrentStory] = useState(null);

      useEffect(() => {
        const handleScroll = () => {
          const currentScrollY = window.scrollY;
          
          if (currentScrollY > lastScrollY && currentScrollY > 5) {
            setIsScrolled(true);
          }
          else if (currentScrollY < lastScrollY && currentScrollY < 5) {
            setIsScrolled(false);
          }
          
          setLastScrollY(currentScrollY);
        };

        window.addEventListener('scroll', handleScroll);
        return () => window.removeEventListener('scroll', handleScroll);
      }, [lastScrollY]);

      const handleNavClick = (index) => {
        setActiveIndex(index);
      };

      const handleCollapsedStoryClick = () => {
        setIsScrolled(true);
      };

      const handleMyStoryClick = () => {
        setCurrentStory({
          username: 'My story',
          time: '3m',
          avatar: 'M',
          progressBars: 1,
          background: '#000000',
          caption: ''
        });
        setShowStoryViewer(true);
      };

      const handleVaViaStoryClick = () => {
        setCurrentStory({
          username: 'VaVia',
          time: '5m',
          avatar: 'https://i.ibb.co/C5b875C6/Screenshot-20250904-050841.jpg',
          progressBars: 2,
          background: 'linear-gradient(135deg, #ff9a56 0%, #ff6a00 50%, #ff4500 100%)',
          caption: "Guess the Animal"
        });
        setShowStoryViewer(true);
      };

      const handleStoryTouchStart = (e) => {
        setIsDragging(true);
      };

      const handleStoryTouchMove = (e) => {
        if (!isDragging) return;
        const touch = e.touches[0];
        const deltaY = touch.clientY;
        if (deltaY > 0) {
          setStoryDragY(deltaY);
        }
      };

      const handleStoryTouchEnd = () => {
        if (storyDragY > 30) {
          setShowStoryViewer(false);
        }
        setStoryDragY(0);
        setIsDragging(false);
      };

      const handleCloseStory = () => {
        setShowStoryViewer(false);
        setStoryDragY(0);
      };

      return (
        <>
          <div className="header-container">
            <div className="top-navbar">
              <svg className="icon messages-icon" viewBox="0 0 24 24" fill="#749cbf" stroke="currentColor" strokeWidth="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg>
              
              <h1 className={isScrolled ? 'visible' : ''}>Messages</h1>
              
              <div className={`stories-collapsed ${isScrolled ? 'moved' : ''}`} onClick={handleCollapsedStoryClick}>
                <div className="story-item-collapsed">
                  <div className="story-ring-collapsed">
                    <div className="story-ring-inner-collapsed">
                      <div className="story-avatar-text-collapsed">M</div>
                    </div>
                  </div>
                </div>
                
                <div className="story-item-collapsed">
                  <div className="story-ring-collapsed">
                    <div className="story-ring-inner-collapsed">
                      <img 
                        src="https://i.ibb.co/C5b875C6/Screenshot-20250904-050841.jpg" 
                        alt="VaVia"
                        className="story-avatar-collapsed"
                      />
                    </div>
                  </div>
                </div>
              </div>
              
              <div className="add-button">
                <i className="fas fa-search"></i>
              </div>
            </div>

            <div className={`stories-expanded ${isScrolled ? 'visible' : ''}`}>
              <div className="stories-wrapper">
                <div className="story-item" onClick={handleMyStoryClick}>
                  <div className="story-ring">
                    <div className="story-ring-inner">
                      <div className="story-avatar-text">M</div>
                    </div>
                  </div>
                  <div className="story-label">My story</div>
                </div>
                
                <div className="story-item" onClick={handleVaViaStoryClick}>
                  <div className="story-ring multi-story">
                    <div className="story-ring-inner">
                      <img 
                        src="https://i.ibb.co/C5b875C6/Screenshot-20250904-050841.jpg" 
                        alt="VaVia"
                        className="story-avatar"
                      />
                    </div>
                  </div>
                  <div className="story-label">VaVia</div>
                </div>
              </div>
            </div>
            
            <div className="nav-container">
              <div className="nav-bar">
                <div 
                  className={`nav-item ${activeIndex === 0 ? 'active' : ''}`}
                  onClick={() => handleNavClick(0)}
                >
                  <i className="far fa-clock"></i>
                </div>
                <div 
                  className={`nav-item ${activeIndex === 1 ? 'active' : ''}`}
                  onClick={() => handleNavClick(1)}
                >
                  <i className="fas fa-user-friends"></i>
                </div>
                <div 
                  className={`nav-item ${activeIndex === 2 ? 'active' : ''}`}
                  onClick={() => handleNavClick(2)}
                >
                  <i className="fas fa-list"></i>
                </div>
              </div>
              <div className="bottom-border">
                <div 
                  className="active-indicator"
                  style={{left: `${activeIndex * 33.333}%`}}
                ></div>
              </div>
              
              <div className="message-item">
                <div className="message-avatar">DS</div>
                <div className="message-content">
                  <div className="message-header">
                    <div className="message-name">Daddy Steve</div>
                    <div className="message-date">Oct 27</div>
                  </div>
                  <div className="message-preview">How are you doing</div>
                </div>
              </div>
              
              <div className="message-item">
                <div className="message-avatar">
                  <img 
                    src="https://i.ibb.co/C5b875C6/Screenshot-20250904-050841.jpg" 
                    alt="VaVia"
                    style={{width: '100%', height: '100%', borderRadius: '50%', objectFit: 'cover'}}
                  />
                </div>
                <div className="message-content">
                  <div className="message-header">
                    <div className="message-name">VaVia</div>
                    <div className="message-date">Oct 25</div>
                  </div>
                  <div className="message-preview">See you tomorrow!</div>
                </div>
              </div>
            </div>
          </div>

          <div className={`content-spacer ${isScrolled ? 'expanded' : 'collapsed'}`}></div>

          {showStoryViewer && currentStory && (
            <div 
              className="story-viewer-overlay"
              onTouchStart={handleStoryTouchStart}
              onTouchMove={handleStoryTouchMove}
              onTouchEnd={handleStoryTouchEnd}
            >
              <div className="story-viewer-content">
                <div className="story-viewer-background" style={{background: currentStory.background}}>
                </div>
                
                <div className="story-viewer-header">
                  <div className="story-progress-container">
                    {[...Array(currentStory.progressBars)].map((_, index) => (
                      <div key={index} className="story-progress-bar">
                        <div className="story-progress-fill"></div>
                      </div>
                    ))}
                  </div>
                  
                  <div className="story-user-info">
                    <div className="story-user-left">
                      <div className="story-user-avatar">
                        {typeof currentStory.avatar === 'string' && currentStory.avatar.startsWith('http') ? (
                          <img 
                            src={currentStory.avatar} 
                            alt={currentStory.username}
                            style={{width: '100%', height: '100%', borderRadius: '50%', objectFit: 'cover'}}
                          />
                        ) : (
                          currentStory.avatar
                        )}
                      </div>
                      <div className="story-user-details">
                        <div className="story-username">{currentStory.username}</div>
                        <div className="story-time">{currentStory.time}</div>
                      </div>
                    </div>
                    
                    <div className="story-actions">
                      <button className="story-action-btn" onClick={handleCloseStory}>
                        <i className="fas fa-times"></i>
                      </button>
                    </div>
                  </div>
                </div>
                
                {currentStory.caption && (
                  <div className="story-viewer-footer">
                    <div className="story-caption">{currentStory.caption}</div>
                  </div>
                )}
                
                <div className="story-reply-container">
                  <div className="story-reply-box">Reply privately...</div>
                </div>
              </div>
            </div>
          )}
        </>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<NavigationBar />);
  </script>
</body>
</html>
